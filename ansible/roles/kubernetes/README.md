# Роль kubernetes

## Описание

Эта роль Ansible предназначена для установки и настройки компонентов Kubernetes, таких как Kubeadm и Kubelet.

## Переменные роли

```kubernetes_version``` - Версия Kubernetes. Эта переменная используется для формирования URL репозитория и GPG-ключа.

Список утилит Kubernetes, которые требуется установить:

```
kubernetes_packages:
  - kubelet
  - kubeadm
```

## Описание задач роли

1. Установка зависимостей:
Устанавливаются необходимые пакеты, такие как apt-transport-https, ca-certificates, curl и gpg, которые требуются для работы с репозиториями и управления пакетами.

2. Добавление GPG-ключа для репозитория Kubernetes:
Загружается и добавляется GPG-ключ для репозитория Kubernetes.

3. Добавление репозитория Kubernetes:
В систему добавляется репозиторий Kubernetes, который содержит пакеты для установки kubeadm и kubelet. Репозиторий настраивается с использованием ранее добавленного GPG-ключа.

4. Установка Kubeadm и Kubelet:
Устанавливаются пакеты Kubelet и Kubeadm из добавленного репозитория.

5. Настройка предпочтений APT для Kubernetes:
Создается файл предпочтений APT (/etc/apt/preferences.d/kubernetes), который позволяет зафиксировать версии пакетов Kubernetes, чтобы избежать нежелательных обновлений.

## Пример плейбука

```
- hosts: all
  roles:
    - kubernetes
```

**Автор** MaximAntropov
